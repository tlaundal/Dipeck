ext.sources = "src"
ext.tests = "test"

ext.nodejs = true

ext.compose = "frontend"
ext.registerComposeInputs = {
  inputs.file "healthcheck.sh"
  inputs.file "nginx.conf"
  inputs.file "package.json"
  inputs.dir "src/"
}
afterEvaluate {
  def deps = [ "request", "notification" ].collect { ":dipeck_${it}" }
  def depsUp = deps.collect({ "${it}:composeUp" })
  def depsStop = deps.collect({ "${it}:composeStop"})
  composeUp.dependsOn depsUp
  depsStop.collect(tasks.&getByPath).each { it.dependsOn composeStop }
}
